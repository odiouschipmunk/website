<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Squash Analysis Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="bi bi-graph-up me-2"></i>
                Squash Analysis Dashboard
            </a>
            <button class="theme-toggle-btn" id="themeToggle">
                <i class="bi bi-sun"></i>
            </button>
        </div>
    </nav>

    <div class="container py-4">
        <!-- Video Analysis Section -->
        <div class="dashboard-section">
            <div class="row g-4">
                <div class="col-lg-6">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5 class="card-title">
                                <i class="bi bi-camera-video me-2"></i>
                                Original Match Analysis
                            </h5>
                        </div>
                        <div class="card-body p-0">
                            <div class="video-container">
                                <img src="../static/annotated2.gif" alt="Match Analysis" class="img-fluid">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5 class="card-title">
                                <i class="bi bi-box me-2"></i>
                                3D Match Visualization
                            </h5>
                        </div>
                        <div class="card-body p-0">
                            <img src="../static/3d_match_visualization.png" alt="3D Match Visualization" class="img-fluid">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Position Analysis Section -->
        <div class="dashboard-section">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title">
                                <i class="bi bi-graph-up me-2"></i>
                                Position Distance Analysis
                            </h5>
                        </div>
                        <div class="card-body p-0">
                            <img src="../static/t_position_distance.png" alt="Position Distance Plot" class="img-fluid">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Player Movement Analysis Section -->
        <div class="dashboard-section">
            <div class="row g-4">
                <div class="col-lg-4">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5 class="card-title">
                                <i class="bi bi-pie-chart me-2"></i>
                                Shot Distribution
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="visualization-container">
                                <img src="../output_final/shot_distribution.png" alt="Shot Distribution" class="img-fluid">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5 class="card-title">
                                <i class="bi bi-person me-2"></i>
                                Player 1 Heatmap
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="visualization-container">
                                <div id="player2Heatmap"></div>
                                <img src="../output_final/player_1_heatmap.png" alt="Player 2 Heatmap" class="img-fluid">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5 class="card-title">
                                <i class="bi bi-person me-2"></i>
                                Player 2 Heatmap
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="visualization-container">
                                <div id="player1Heatmap"></div>
                                <img src="../output_final/player_2_heatmap.png" alt="Player 1 Heatmap" class="img-fluid">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Match Report Section -->
        <div class="dashboard-section">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title">
                                <i class="bi bi-file-text me-2"></i>
                                Match Analysis Report
                                <hr>
                                <strong>1. Shot Distribution</strong>
                                <ul>
                                    <li>tight_straight drive: 55 shots (24.1%)</li>
                                    <li>straight drive: 139 shots (61.0%)</li>
                                    <li>wide_crosscourt drive: 34 shots (14.9%)</li>
                                </ul>
                                <strong>2. Shot Success Rates</strong>
                                <ul>
                                    <li>tight_straight drive: 100.0%</li>
                                    <li>straight drive: 100.0%</li>
                                    <li>wide_crosscourt drive: 100.0%</li>
                                </ul>
                                <strong>3. Average Distance from T Position</strong>
                                <ul>
                                    <li>Player 1: 0.93 meters</li>
                                    <li>Player 2: 0.76 meters</li>
                                </ul>
                                <strong>4. Visualization Files Generated</strong>
                                <ul>
                                    <li>3D match visualization (3d_match_visualization.png)</li>
                                    <li>Shot trajectories by type (3d_trajectory_*.png)</li>
                                    <li>Player position heatmaps (3d_heatmap_*.png)</li>
                                    <li>Shot distribution pie chart (shot_distribution.png)</li>
                                    <li>T position distance graph (t_position_distance.png)</li>
                                    <li>Shot success rate bar chart (shot_success_rate.png)</li>
                                </ul>
                                
                            </h5>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;
        const themeIcon = themeToggle.querySelector('i');

        // Check for saved theme preference
        const savedTheme = localStorage.getItem('theme') || 'light';
        html.setAttribute('data-theme', savedTheme);
        updateThemeIcon(savedTheme);

        themeToggle.addEventListener('click', () => {
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        });

        function updateThemeIcon(theme) {
            themeIcon.className = theme === 'light' ? 'bi bi-moon' : 'bi bi-sun';
        }
    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>